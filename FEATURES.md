# HelixPlot - 3D Math Visualizer

HelixPlot은 수학 함수를 실시간 3D로 시각화하는 크로스플랫폼 앱입니다.
웹, iOS, Android를 모두 지원하며, 수식 입력부터 애니메이션 재생, 내보내기까지 상용 수준의 기능을 제공합니다.

---

## 목차

1. [수식 엔진](#1-수식-엔진)
2. [렌더링 모드](#2-렌더링-모드)
3. [3D 시각화](#3-3d-시각화)
4. [프리셋 라이브러리](#4-프리셋-라이브러리)
5. [수식 편집기](#5-수식-편집기)
6. [애니메이션 재생](#6-애니메이션-재생)
7. [파라미터 슬라이더](#7-파라미터-슬라이더)
8. [테마 및 설정](#8-테마-및-설정)
9. [내보내기 및 공유](#9-내보내기-및-공유)
10. [수식 히스토리](#10-수식-히스토리)
11. [다국어 지원](#11-다국어-지원)
12. [모바일 최적화](#12-모바일-최적화)
13. [온보딩](#13-온보딩)
14. [광고 시스템](#14-광고-시스템)
15. [성능 최적화](#15-성능-최적화)
16. [기술 스택](#16-기술-스택)

---

## 1. 수식 엔진

### DSL (Domain-Specific Language) 문법

HelixPlot은 자체 DSL 문법으로 수학 함수를 정의합니다. mathjs 기반의 강력한 수식 평가 엔진을 사용합니다.

**기본 문법:**

```
# 주석 (# 또는 // 사용)
이름(매개변수) = 수식

# 벡터(파라메트릭 커브)
r(t) = (sin(t), cos(t), t/10)

# 개별 성분 정의
x(t) = sin(t)
y(t) = cos(t)
z(t) = t / 10

# 서피스 (곡면)
z(x, y) = sin(x) * cos(y)

# 상수 정의
a = 3
k = 2
r(t) = (a * cos(k*t), a * sin(k*t), t)
```

**지원 함수:**

| 분류 | 함수 |
|------|------|
| 삼각함수 | `sin`, `cos`, `tan`, `asin`, `acos`, `atan`, `atan2` |
| 쌍곡선함수 | `sinh`, `cosh`, `tanh` |
| 지수/로그 | `exp`, `log`, `log2`, `log10`, `ln` |
| 거듭제곱/근 | `sqrt`, `cbrt`, `abs`, `pow` |
| 정수함수 | `floor`, `ceil`, `round`, `mod` |
| 복소수 | `re`, `im`, `conj`, `arg`, `polar` |

**내장 상수:** `pi`, `e`, `i` (허수단위), `tau` (2pi)

**특수 설정 상수:**

```
tmin = -10    # t 범위 최솟값
tmax = 10     # t 범위 최댓값
samples = 800 # 샘플 개수
period = 2*pi # 애니메이션 루프 주기
```

### 자동 모드 감지

수식 구조를 분석하여 렌더링 모드를 자동으로 결정합니다:

- `r(t) = (x, y, z)` 형태 → **커브 모드**
- `x(t)`, `y(t)`, `z(t)` 개별 정의 → **커브 모드**
- `f(t)` 단일 함수 (복소수 결과) → **복소수 모드**
- `z(x, y) = ...` 또는 `z = f(x, y)` → **서피스 모드**

---

## 2. 렌더링 모드

### 커브 모드 (Parametric Curve)

3D 공간에서 매개변수 `t`에 따른 곡선을 렌더링합니다.

- **TubeGeometry:** 곡선을 0.06 반지름의 튜브로 렌더링
- **Catmull-Rom 보간:** 점 사이를 부드럽게 연결
- **트레이서 이펙트:** 곡선을 따라 이동하는 발광 애니메이션 (커스텀 셰이더)
- **불연속점 처리:** NaN/Infinity 구간을 빨간 점선으로 표시
- **투영 그림자:** 각 평면에 곡선의 투영을 30% 투명도로 표시

### 서피스 모드 (Surface)

`z = f(x, y)` 형태의 곡면을 렌더링합니다.

- **높이 기반 컬러맵:** Viridis 스타일 (보라 → 파랑 → 청록 → 초록 → 노랑)
- **와이어프레임 오버레이:** 8% 투명도의 격자선
- **양면 렌더링:** 곡면의 앞뒤 모두 표시
- **그리드 해상도:** 기본 50x50 샘플링
- **NaN 영역 처리:** 정의되지 않는 구간을 자동으로 건너뜀

### 복소수 모드 (Complex)

`f(t)`가 복소수를 반환하는 경우, `(t, Re(f), Im(f))` 3차원 곡선으로 시각화합니다.

---

## 3. 3D 시각화

### 뷰포트 구성

**카메라:**
- **원근 카메라 (3D 뷰):** 45도 시야각, 자동 피팅
- **직교 카메라 (평면 뷰):** X/Y/Z 평면 투영

**조명:**
- 환경광 (intensity 0.7)
- 주광원 (10, 10, 10) + 보조광원 (-10, 5, -5)

**뷰 모드:**

| 모드 | 설명 |
|------|------|
| 다이어그램 뷰 | 3D 원근 뷰, 투영 평면 및 다이어그램 요소 포함 |
| 쿼드 뷰 | 3D + X평면(YZ) + Y평면(XZ) + Z평면(XY) 4분할 |

### 투영 평면 (Projection Planes)

3개의 반투명 평면이 데이터 범위에 맞추어 자동 배치됩니다:

| 평면 | 투영 | 기본 색상 | 위치 |
|------|------|----------|------|
| Z 평면 | XY 투영 | 파랑 (#3B82F6) | z = -halfSize |
| Y 평면 | XZ 투영 | 초록 (#22C55E) | y = -halfSize |
| X 평면 | YZ 투영 | 빨강 (#EF4444) | x = -halfSize |

각 평면의 색상과 투명도는 설정에서 커스터마이즈 가능합니다.

### 다이어그램 요소

- **동적 투영점:** 커서 위치에서 각 평면으로의 투영을 점과 점선으로 표시
- **축 레이블:** X(빨강), Y(초록), Z(파랑) 텍스트 오버레이
- **눈금 표시:** 범위에 따라 적응적 간격 (extent >= 20: 5단위, >= 6: 2단위, 그 외: 1단위)
- **좌표 툴팁:** 재생 중 커서 위치를 `(x.xx, y.yy, z.zz)` 형식으로 실시간 표시
- **그리드:** XZ 평면 격자선

### 카메라 조작

| 입력 | 동작 |
|------|------|
| 드래그 (3D) | 회전 |
| 드래그 (평면 뷰) | 패닝 |
| 스크롤 / 핀치 | 확대/축소 |
| 더블 클릭/탭 | 뷰 리셋 |
| 터치 1개 (3D) | 회전 |
| 터치 2개 | 확대/축소 + 패닝 |

---

## 4. 프리셋 라이브러리

5개 카테고리, 총 47개 프리셋이 내장되어 있습니다.

### 수학 (13개)

| 프리셋 | 설명 |
|--------|------|
| Lissajous / Complex Demo | 리사주 곡선 (기본 프리셋) |
| Circle (Unit) | 단위원 |
| Rose (k=5) | 장미 곡선 |
| Lemniscate (Bernoulli) | 렘니스케이트 |
| Archimedean Spiral | 아르키메데스 나선 |
| Logarithmic Spiral | 로그 나선 |
| Beating (sin1+sin2) | 맥놀이 현상 |
| Fourier Series (Square-ish) | 푸리에 급수 (사각파 근사) |
| Polynomial (Cubic) | 3차 다항식 |
| Rational (1/t) | 유리함수 |
| Exponential vs Log | 지수 vs 로그 비교 |
| Absolute (Cusp) | 절댓값 함수 (첨점) |

### 물리학 (8개)

| 프리셋 | 설명 |
|--------|------|
| Simple Harmonic (phasor) | 단순조화운동 (페이저) |
| Damped Oscillator | 감쇠 진동 |
| Chirp (freq increases) | 처프 신호 (주파수 증가) |
| Gaussian Wave Packet | 가우시안 파동 패킷 |
| Standing Wave (2-mode) | 정상파 (2모드) |
| Projectile | 포물선 운동 |
| Kepler Ellipse | 케플러 타원궤도 |
| Damped rotation | 감쇠 회전 |

### 화학 (7개)

| 프리셋 | 설명 |
|--------|------|
| 1st-order decay | 1차 반응 감쇄 |
| 2nd-order (1/(1+kt)) | 2차 반응 |
| Arrhenius-like | 아레니우스 유사 곡선 |
| H-H sigmoid | 헨더슨-하셀바흐 시그모이드 |
| Beer-Lambert attenuation | 비어-람베르트 감쇠 |
| Lennard-Jones Potential | 레너드-존스 퍼텐셜 |
| Morse Potential | 모스 퍼텐셜 |

### 생명과학 (6개)

| 프리셋 | 설명 |
|--------|------|
| Logistic Growth | 로지스틱 성장 |
| Gompertz Growth | 곰페르츠 성장 |
| Michaelis-Menten | 미카엘리스-멘텐 역학 |
| Hill Function (n=4) | 힐 함수 |
| Damped biological oscillation | 감쇠 생체 진동 |
| Circadian-like (24h) | 서카디안 리듬 |

### 지구과학 (6개)

| 프리셋 | 설명 |
|--------|------|
| Seasonal + Trend | 계절 변동 + 추세 |
| Tides (M2+S2) | 조석 (반일주조 + 태양반일주조) |
| Seismic wave packet | 지진파 패킷 |
| Multi-mode atmosphere-ish | 다중모드 대기 유사 |
| Exponential attenuation | 지수 감쇠 |
| Ocean gyre-ish spiral | 해양 환류 나선 |

---

## 5. 수식 편집기

### 이중 입력 모드

세그먼트 컨트롤로 두 가지 입력 방식을 전환할 수 있습니다:

**수식 편집 모드 (기본):**
- MathLive 기반 시각적 LaTeX 편집기
- 수학 기호를 그래피컬하게 입력
- 분수, 루트, 지수 등 자연스러운 수식 렌더링

**코드 입력 모드:**
- DSL 텍스트 직접 입력
- 줄별 에러 표시
- 구문 강조 지원

### LaTeX 수식 편집기 모달

전체 화면 모달로 더 넓은 편집 공간을 제공합니다:

- **MathLive 통합:** 터치/키보드 친화적 LaTeX 에디터
- **가상 키보드:** 수학 기호 전용 키보드
- **퀵 바 (12개 심볼):** `frac`, `sqrt`, `^`, `_`, `pi`, `theta`, `sin`, `cos`, `tan`, `log`, `ln`, `e`
- **양방향 변환:** LaTeX <-> DSL 자동 변환

**지원 LaTeX 명령어:**
- 함수: `\sin`, `\cos`, `\tan`, `\sqrt`, `\frac`, `\log`, `\ln`, `\exp`
- 상수: `\pi`, `\theta`, `\tau` 및 그리스 문자
- 연산자: `\cdot`, `\times`, `\div`, `\pm`, `\mp`
- 첨자: `^{...}`, `_{...}`

---

## 6. 애니메이션 재생

### PlaybackBar 컨트롤

| 컨트롤 | 기능 |
|--------|------|
| 재생/일시정지 | 애니메이션 토글 |
| 프로그레스 바 | 클릭/드래그로 시간 탐색 |
| 속도 셀렉터 | 0.5x / 1.0x / 2.0x / 5.0x |
| 속도 +/- 버튼 | +-0.1x 미세 조정 |
| t 값 표시 | 현재 매개변수 값 실시간 표시 |

### 재생 동작

- **루프 재생:** `period` 상수가 정의되면 해당 주기로 자동 반복
- **범위 제한:** `tmin`~`tmax` 사이에서 재생, 범위 초과 시 리셋
- **프레임 동기화:** `requestAnimationFrame` 기반 60fps 렌더링
- **키보드 조작:** 좌우 화살표로 +-5% 탐색

### 커서 추적

재생 중 3D 공간에서 현재 위치를 표시합니다:
- 흰색 발광 구체가 곡선을 따라 이동
- 각 평면으로의 투영점 + 점선 표시
- 좌표 툴팁 `(x, y, z)` 실시간 업데이트 (5Hz 스로틀링)

---

## 7. 파라미터 슬라이더

수식에서 사용자 정의 상수(파라미터)를 자동 감지하여 실시간 조절 슬라이더를 생성합니다.

**자동 감지 규칙:**
- `a = 3` 형태의 단순 상수 할당을 감지
- 시스템 예약 상수 (`tmin`, `tmax`, `samples`, `period` 등)는 제외
- `pi`, `e` 등 수학 상수도 제외

**범위 자동 추정:**
- 값이 0이 아닌 경우: `[0, 3x]` 범위, step = 값의 크기/100
- 값이 0인 경우: `[-10, 10]` 범위, step = 0.1

**UI:**
- 각 파라미터별 슬라이더 + 직접 입력 필드
- min/max 범위 조절 가능
- 슬라이더 조작 시 즉시 시각화 반영

---

## 8. 테마 및 설정

### 테마 모드

| 모드 | 배경 | 텍스트 | 특징 |
|------|------|--------|------|
| 라이트 (Diagram) | #fbfafd | #111827 | 밝은 배경, 인디고 악센트 |
| 다크 (Modern) | #0b0f17 | #e5e7eb | 어두운 배경, 보라 악센트 |

CSS 변수 기반으로 전체 앱이 일관되게 전환됩니다:
`--bg`, `--text`, `--card`, `--border`, `--accent`, `--shadow` 등 16개 이상의 변수.

### 평면 커스터마이즈

설정 모달에서 3개 투영 평면 각각의 외관을 조절합니다:

- **색상 선택:** 컬러 휠 (100x100px) + HEX 코드 직접 입력
- **투명도:** 0~100% 범위 슬라이더
- **최근 색상:** 최근 사용한 7개 색상 팔레트
- **초기화:** 기본값 복원 버튼

---

## 9. 내보내기 및 공유

### PNG 다운로드

- 현재 3D 뷰포트를 PNG 이미지로 캡처
- `helixplot-{timestamp}.png` 형식으로 자동 파일명 생성
- Canvas `toDataURL('image/png')` 기반

### 공유 링크

- 현재 수식을 URL 쿼리 파라미터로 인코딩
- 형식: `?expr={code}&latex={latex}`
- 클립보드에 자동 복사
- 링크를 받은 사람은 브라우저에서 바로 동일한 시각화 확인 가능

### 코드 복사

- 현재 DSL 수식 텍스트를 클립보드에 복사
- Clipboard API 사용 (미지원 브라우저 `execCommand` 폴백)

---

## 10. 수식 히스토리

### 자동 저장

- 프리셋 전환 시 현재 수식을 자동으로 히스토리에 저장
- 최대 20개의 최근 수식 보관
- 연속 중복 저장 방지

### 즐겨찾기

- 수식을 즐겨찾기에 추가/제거
- 즐겨찾기 이름 변경 가능
- 즐겨찾기는 개수 제한 없이 보관

### 저장 정보

각 히스토리 항목에 저장되는 데이터:
- 고유 ID
- 이름 (코드의 첫 번째 주석 또는 함수명에서 자동 추출)
- DSL 코드
- LaTeX 표현 (있는 경우)
- 생성 시각
- 즐겨찾기 여부

**저장 위치:** `localStorage` (키: `helixplot-history`)

---

## 11. 다국어 지원

### 지원 언어

| 언어 | 로케일 |
|------|--------|
| English | en (United States) |
| 한국어 | ko (대한민국) |

### 번역 범위

100개 이상의 번역 키가 다음 영역을 포괄합니다:

- 앱 네비게이션 (제목, 메뉴, 툴팁)
- 수식 에디터 (플레이스홀더, 도움말)
- 설정 모달 (평면 이름, 레이블)
- 내보내기/공유 (버튼, 알림 메시지)
- 온보딩 (4단계 튜토리얼)
- 모바일 탭 (재생, 입력)
- 토스트 알림 (성공, 에러 메시지)

### 자동 언어 감지

`i18next-browser-languagedetector`로 브라우저 언어 설정을 자동 감지하여 적용합니다.
설정 모달에서 수동 전환도 가능합니다.

---

## 12. 모바일 최적화

### 반응형 레이아웃

| 화면 | 데스크톱 (sm 이상) | 모바일 |
|------|-------------------|--------|
| 3D 뷰 | 메인 영역 전체 | 전체 화면 |
| 쿼드 뷰 | 2x2 그리드 | 탭 전환 |
| 입력 패널 | 좌측 플로팅 패널 | 하단 시트 |
| 재생 컨트롤 | 캔버스 하단 고정 | 하단 시트 내 탭 |

### MobileSheet (하단 시트)

- 드래그로 펼치기/접기
- 탭 전환: 재생 | 입력
- `85dvh` 최대 높이
- Safe Area Inset 대응
- 포커스된 입력 요소 자동 스크롤

### MobileQuadTabs (모바일 4분할)

- 3D, X 평면, Y 평면, Z 평면 4개 탭
- 활성 탭 악센트 색상 강조
- 탭 전환 시 뷰포트 즉시 교체

### 터치 최적화

- 1손가락: 3D 회전 / 2D 패닝
- 2손가락: 핀치 줌 + 패닝
- 더블탭: 뷰 리셋
- `touch-action: none`으로 브라우저 제스처 방지

### 키보드 대응

- Capacitor Keyboard 플러그인으로 네이티브 키보드 높이 추적
- CSS 변수 `--kb`로 키보드 높이 전달
- VisualViewport API 폴백 (웹)

---

## 13. 온보딩

첫 실행 시 4단계 튜토리얼이 표시됩니다:

| 단계 | 아이콘 | 제목 | 내용 |
|------|--------|------|------|
| 1 | 📐 | 환영합니다 | HelixPlot 개요 소개 |
| 2 | ✏️ | 수식 입력하기 | LaTeX/코드 입력 방법 안내 |
| 3 | 🎨 | 프리셋 & 뷰 탐색 | 뷰 모드 및 프리셋 활용법 |
| 4 | ▶️ | 애니메이션 & 내보내기 | 재생 및 공유 기능 안내 |

- **건너뛰기** 버튼으로 즉시 종료 가능
- 완료 후 다시 표시되지 않음 (`hasSeenOnboarding` 플래그 localStorage 저장)
- 이전/다음 네비게이션, 단계 인디케이터 애니메이션

---

## 14. 광고 시스템

### 플랫폼별 지원

| 플랫폼 | SDK | 형식 |
|--------|-----|------|
| 웹 | Google AdSense | 배너 (728x90, 320x50), 전면 (300x250) |
| iOS/Android | AdMob | 배너, 전면 광고 |

### 스플래시 스크린 광고

앱 시작 시 2초 브랜딩 후 전면 광고를 시도합니다:
1. 2초 동안 HelixPlot 로고 애니메이션 표시
2. 광고 로드 시도 (5초 타임아웃)
3. 광고 완료 또는 타임아웃 후 400ms 페이드 아웃

### 전면 광고 정책

사용자 경험을 해치지 않는 규칙을 준수합니다:

| 정책 | 값 |
|------|-----|
| 표시 주기 | 프리셋 변경 3회마다 1회 |
| 세션당 최대 | 3회 |
| 쿨다운 | 최소 60초 간격 |
| 첫 실행 보호 | 온보딩 중 광고 없음 |
| 편집 중 보호 | 수식 편집/재생 중 표시하지 않음 |

### 배너 광고

- 데스크톱: PlaybackBar 하단에 728x90 리더보드 배너
- 모바일: 네이티브 배너 (AdMob 전용)
- 로드 실패 시 자연스럽게 공간 축소

---

## 15. 성능 최적화

### Web Worker 병렬 처리

- **Comlink** 기반 Web Worker로 수식 샘플링을 메인 스레드에서 분리
- 무거운 계산 중에도 UI 반응성 유지
- Worker 실패 시 메인 스레드 폴백 자동 전환

### 디바운싱 및 스로틀링

| 대상 | 간격 | 목적 |
|------|------|------|
| 수식 파싱 | 300ms | 타이핑 중 불필요한 재계산 방지 |
| 좌표 툴팁 | 200ms (5Hz) | setState 호출 빈도 제한 |
| 재생 UI 업데이트 | 100ms | 프로그레스 바 렌더링 최적화 |

### GPU 메모리 관리

- TubeGeometry 교체 시 이전 geometry `dispose()` 호출
- Material 재사용으로 GPU 객체 최소화
- `BufferGeometry`로 효율적 메시 렌더링

### 커스텀 셰이더

커브 렌더러는 커스텀 GLSL 셰이더를 사용합니다:
- 트레이서 이펙트 (곡선을 따라 이동하는 빛)
- 엣지 다크닝 (입체감 향상)
- 시간 기반 애니메이션 (uniform 변수)

### 에러 바운더리

- React ErrorBoundary로 Three.js Canvas 렌더링 에러 격리
- 에러 발생 시 친화적 폴백 UI + 재시도 버튼
- 전체 앱 크래시 방지

---

## 16. 기술 스택

### 프레임워크 및 라이브러리

| 분류 | 기술 | 버전 |
|------|------|------|
| UI | React | 19.2.3 |
| 3D 렌더링 | Three.js | 0.182.0 |
| 3D React | @react-three/fiber | 9.x |
| 3D 유틸리티 | @react-three/drei | 10.x |
| 수식 엔진 | mathjs | 15.1.0 |
| LaTeX 편집 | MathLive | 0.108.2 |
| LaTeX 렌더링 | KaTeX | 0.16.27 |
| 상태관리 | Zustand | 5.0.10 |
| 다국어 | i18next + react-i18next | 25.x / 16.x |
| 스타일링 | Tailwind CSS | 4.1.18 |
| 아이콘 | Lucide React | 0.562.0 |
| 컬러 피커 | @uiw/react-color | 2.9.2 |
| Worker 통신 | Comlink | 4.4.2 |

### 빌드 및 개발

| 도구 | 버전 |
|------|------|
| Vite | 7.3.0 |
| TypeScript | 5.9.3 |
| Vitest | 4.0.18 |
| Tailwind CSS Vite Plugin | 4.1.18 |
| PWA Plugin | 1.2.0 |

### 크로스플랫폼

| 플랫폼 | 기술 | 버전 |
|--------|------|------|
| iOS | Capacitor | 8.0.0 |
| Android | Capacitor | 8.0.0 |
| Web | PWA (Service Worker) | vite-plugin-pwa |

### CI/CD

- **GitHub Actions:** TypeScript 체크 → Vitest 테스트 → Vite 빌드 → 아티팩트 업로드
- **트리거:** `main` 브랜치 push 및 PR

### 빌드 스크립트

```bash
npm run dev        # 개발 서버 (HMR)
npm run build      # TypeScript 체크 + 프로덕션 빌드
npm run preview    # 프로덕션 빌드 미리보기
npm run test       # 테스트 실행 (1회)
npm run test:watch # 테스트 감시 모드
npm run typecheck  # TypeScript 검증 (빌드 없이)
```

### 프로젝트 구조

```
src/
├── core/               # 수식 엔진 (Parser, Evaluator, Sampler, ModeDetector)
├── components/         # React UI 컴포넌트
│   ├── AppShell.tsx        # 전체 레이아웃 셸
│   ├── TopBar.tsx          # 상단 네비게이션 바
│   ├── Viewport.tsx        # 3D 뷰포트 (Camera, Controls, Labels)
│   ├── Renderers.tsx       # 3D 렌더러 (Curve, Surface)
│   ├── Editor.tsx          # 수식/코드 에디터
│   ├── EquationEditorModal.tsx  # LaTeX 에디터 모달
│   ├── PlaybackBar.tsx     # 애니메이션 컨트롤
│   ├── ParameterSlider.tsx # 파라미터 슬라이더
│   ├── SettingsModal.tsx   # 설정 모달
│   ├── ExportModal.tsx     # 내보내기 모달
│   ├── MobileSheet.tsx     # 모바일 하단 시트
│   ├── MobileQuadTabs.tsx  # 모바일 4분할 탭
│   ├── Onboarding.tsx      # 온보딩 튜토리얼
│   ├── SplashScreen.tsx    # 스플래시 스크린
│   ├── Toast.tsx           # 토스트 알림
│   ├── AdBanner.tsx        # 광고 배너
│   └── ErrorBoundary.tsx   # 에러 바운더리
├── hooks/              # 커스텀 훅
│   ├── useHelixState.ts    # 수식 상태 파이프라인
│   ├── usePlaybackRuntime.ts # 재생 런타임
│   ├── usePlaneTheme.ts    # 평면 테마
│   ├── useAutoBound.ts     # 자동 바운딩
│   ├── useMathWorker.ts    # Web Worker 프록시
│   ├── useKeyboardInset.ts # 키보드 높이 추적
│   └── useInterstitialAd.ts # 전면 광고 로직
├── store/              # Zustand 스토어
│   ├── useAppStore.ts      # 글로벌 앱 상태
│   └── historyStore.ts     # 수식 히스토리
├── presets/            # 내장 프리셋 (47개)
├── utils/              # 유틸리티
│   ├── latexToExpr.ts      # LaTeX <-> DSL 변환
│   └── export.ts           # 내보내기/공유
├── services/           # 서비스
│   └── AdService.ts        # 광고 서비스
├── worker/             # Web Worker
│   └── math.worker.ts      # 수식 계산 워커
├── locales/            # 번역 파일 (en, ko)
└── i18n.ts             # i18n 설정
```
